<!doctype html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{{ block "title" . }}{{ .Title }} | {{ .Site.Params.site }}{{ end }}</title>
    {{- $description := printf "{{ i18n `discover` }} %s" .Site.Title }}
    {{- if eq .Kind "section" }}
      {{- $description = printf "{{ i18n `discover` }} %s" .Title }}
    {{- else if .IsPage }}
      {{- $dirs := split .File.Dir "/" }}
      {{- $main := index $dirs 0 }}
      {{- $city := index $dirs 1 }}
      {{- $entry := index .Site.Data $main $city .File.BaseFileName }}
      {{- $name := $entry.city }}
      {{- $opening_hours := "" }}{{ if $entry.opening_hours }}{{ $opening_hours = ", {{ i18n `openingHours` }}" }}{{ end }}
      {{- $phone := "" }}{{ if $entry.phone }}{{ $phone = ", {{ i18n `phonenumber` }}" }}{{ end }}
      {{- $website := "" }}{{ if $entry.website }}{{ $website = " {{ i18n `andLinkToWebsite` }}" }}{{ end }}
      {{- $description = printf "{{ i18n `address` }}%s%s%s {{ i18n `of` }} %s {{ i18n `in` }} %s" $opening_hours $phone $website .Title $name }}
    {{- end }}
    <meta name="description" content="{{ $description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta property="og:site_name" content="{{ .Site.Params.site }}">
    <meta property="og:title" content="{{ with .Title }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:image" content="{{ `/img/logo-1200x1200.png` | absURL }}">
    <meta property="og:image:width " content="1200">
    <meta property="og:image:height" content="1200">
    <meta property="og:image:alt" content="{{ i18n `shoppingCart` }}">
    <meta property="og:description" content="{{ $description }}">
    <meta property="og:locale" content="{{ replace .Site.LanguageCode `-` `_` }}">
    <link rel="canonical" href="{{ .Permalink }}">
    <link rel="icon" href="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3e%3ctext%20y='.9em'%20font-size='90'%3eüõí%3c/text%3e%3c/svg%3e">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#f57c00">
    {{- $choices := resources.Get "scss/vendor/choices.scss" | toCSS }}
    {{- $app := resources.Get "scss/app.scss" | toCSS }}
    {{- $style := slice $choices $app | resources.Concat "css/main.css" }}
    {{- if hugo.IsProduction }}
      {{- $style = slice $choices $app | resources.Concat "css/main.css" | minify | fingerprint }}
    {{- end }}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}">
  </head>
  <body>
    <div class="container">
      <header id="top">
        <h1 class="m-0"><a href="/" aria-label="{{ i18n `navigateToStartPage` }}">üõí</a> {{ block "heading" . }}{{ .Title }}{{ end }}</h1>
        <section id="search" class="row mt-1" aria-hidden="true">
          <div class="col-3 col-md-2 col-lg-1">
            <label for="position-btn">{{ i18n `my` }}</label>
            <button id="position-btn" class="d-block m-0" name="home">üè†</button>
          </div>
          <div class="col-9 col-md-4 col-lg-5">
            <label for="cities">{{ i18n `place` }}</label>
            <select data-type="select-one" class="form-control" name="cities" id="cities"></select>
          </div>
          <div class="col-9 col-md-4 col-lg-5 mt-1 mt-md-0">
            <label for="shops">{{ i18n `category` }} / {{ i18n `shop` }}</label>
            <select data-type="select-one" class="form-control" name="shops" id="shops"></select>
          </div>
          <div class="col-3 col-md-2 col-lg-1 mt-1 mt-md-0">
            <label for="search-btn">{{ i18n `go` }}</label>
            <button disabled id="search-btn" class="d-block m-0" name="finish">üöÄ</button>
          </div>
        </section>
      </header>
      <hr>
      <main>
        {{- block "main" . }}{{ end }}
      </main>
      {{- block "back" . }}
      <nav aria-label="{{ i18n `jump` }}{{ i18n `toTop` }}">
        <ul>
          {{ partialCached "to-top-link.html" . }}
        </ul>
      </nav>
      {{ end }}
      {{ partialCached "banner.html" . }}
      <hr>
      {{ partialCached "footer.html" . }}
    </div>
    <script nomodule src="/js/es6-promise.auto.js"></script>
    <script nomodule src="/js/fetch.umd.js"></script>
    <script nomodule src="/js/polyfills.js"></script>
    {{- $openinghours := resources.Get "/js/simple-opening-hours.js" }}
    {{- $choices := resources.Get "/js/choices.js" }}
    {{- $slugo := resources.Get "/js/slugo.js" }}
    {{- $app := resources.Get "/js/app.js" }}
    {{- $js := slice $openinghours $choices $slugo $app | resources.Concat "js/main.js" }}
    {{- if hugo.IsProduction }}
      {{- $js = slice $openinghours $choices $slugo $app | resources.Concat "js/main.js" | minify | fingerprint }}
    {{- end }}
    <script defer src="{{ $js.RelPermalink }}"></script>
  </body>
</html>
